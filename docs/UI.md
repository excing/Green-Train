下面给出一份**从体验目标 → 信息架构 → 关键流程 → 主要界面 → 设计系统（Design System）→ 组件库与交互细节 → 文案与可用性 → 性能与无状态特性可视化 → 迭代与度量**的完整 UI/UX 设计方案。你可以直接把它当成 Figma 原型与前端实现（SvelteKit + Tailwind） 的落地蓝图。

---

## 0. 设计总纲

**体验关键词**

> 慢社交、沉浸、一次性、低压、氛围感、火车意象、无状态/本地即焚

**设计目标**

1. **把“时间与旅程”显化**：倒计时、站点进度条、到站提示，始终提醒“这趟旅途会结束”。
2. **把“无状态 & 不存储”透明化**：在每个私聊与群聊入口处显著标注“消息仅保存在你的设备中，清除缓存即消失”。
3. **把“氛围”做成一等公民**：时刻表、车窗风景、站点主题色，配合 Ken Burns 动效与低饱和度渐层，营造沉浸感。
4. **操作成本极低**：极简资料、极简入口（主导航最多 4 个 Tab），明确的 CTA（购票、上车、下车）。
5. **免费额度友好**：前端离线缓存、骨架屏、消息最小 UI 刷新、弱网络降级模式。

---

## 1. 信息架构（IA）

**主导航（底部 Tab / 移动优先）**

1. **时刻表（Home）**：列车列表 & 倒计时
2. **旅程（Journey）**：仅在有正在进行的车次时显示（或以 Badge 呈现进入），含 1v1 与车厢群聊两个 Tab
3. **票夹（Tickets）**：剩余车票、已购虚拟纪念票、邀请得票入口
4. **我（Profile）**：昵称头像、邀请链接、设置（隐私、清除本地聊天记录、深浅色主题）

> 桌面端：左侧**竖直导航栏** + 主内容区；大屏幕下“时刻表”可以使用 2 列 Masonry 或卡片网格。

---

## 2. 用户关键路径（Flows）

### Flow A：第一次使用（匿名或快速注册）

1. 启动 → Onboarding（2-3 屏，解释“旅途即焚、服务器不存消息”）
2. 选择昵称 + 头像（可跳过头像，默认生成）
3. 自动获得今日 3 张普通车票（提示“24h 不累加”）
4. 进入 **时刻表**

### Flow B：购票 & 候车 & 发车 & 聊天

1. **时刻表**选择车次 → 查看站点详情
2. 选择上/下车站 → 计算车票 → 扣票 → 生成虚拟纪念票（可分享）
3. 进入**候车室**（倒计时 + 状态提示：候车中 / 检票中 / 已发车）
4. **发车瞬间**：自动跳转到 **旅程** Tab

   * Tab1：邻座私聊（1v1）
   * Tab2：车厢群聊（Topic 广播）
   * 顶部永久显示**剩余时间计时器**
5. 到站/终到：自动**结束会话** → 进入**旅程结束页（纪念票 + 复盘/反馈）**

### Flow C：邀请与得票

1. 我（Profile） → 复制邀请码 / 链接
2. 被邀请者完成首次旅行 → 奖励发放提示在邀请者的票夹页显示

---

## 3. 主要界面设计（逐屏说明）

### 3.1 **时刻表（车站大厅）** — *P0*

**视觉**：全屏“站内大屏”样式；列表卡片含：车次号、主题、途经站点（📍标签列出）、发车倒计时、状态 Pill（候车中/检票中/已出发）。
**交互**：

* 顶部搜索/筛选（主题、出发时间、站点数、旅程时长）。
* 卡片右上角显示所需票数估算（1 站 = 1 票，选择后再精算）。
* 每张卡片点击进入**列车详情**。

**状态**：

* **空状态**：今天没有列车？→ “今日休息，去看看明日时刻表吧（按钮：切换日期）”
* **加载状态**：车卡 skeleton（Title + 两行 fake 文本 + 倒计时骨架）
* **错误状态**：网络不佳 → “无法获取时刻表，稍后重试 / 使用离线缓存（最近一次）”

---

### 3.2 **列车详情 / 站点表** — *P0*

**内容**：

* 车次 + 主题 + 简要文案营造氛围（例如：“在**深夜电影**中短暂停靠，聊聊你最近的黑白片”）。
* **站点列表**（Timeline / Stepper）：站名、子主题、副标题、停留时长、预计到站时间。
* CTA：**选择上车站 / 下车站**（两个下拉 / Stepper），实时计算票数。
* 右侧/底部固定**购票按钮**（显示将扣 X 张票，剩余 Y）。

**视觉节奏**：

* 每个站点块附带一张小图（与主题相关），灰阶处理，hover/选中时彩色。

---

### 3.3 **购票确认** — *P0*

* 对话框 / 全屏页（移动端）：展示旅程摘要（起/终站、站数、发车时间、预计结束时间）。
* **纪念票预览卡**（票号、车次、主题、你的座位号/匿名代号）。
* 明确说明：“消息不会保存于服务器，仅存于你的设备本地”。

---

### 3.4 **候车室** — *P0*

**核心**：**巨大倒计时** + 火车检票 / 开车状态动画（进度环/进度条）。
**模块**：

* 当前列车：基本信息
* 乘客列表（匿名头像气泡滚动，强化“你不是一个人”）
* 一句引导文案：“出发前，选一个你想聊的问题 / 带一个关键词上车？”（可写下 1 行，发车后会自动成为对话起点，异步展示给对方）

---

### 3.5 **旅程（聊天页）** — *P0*

上半部分：**车窗风景**（Ken Burns + 淡入淡出，顶部可选择“景观模式 / 关闭动效降低功耗”）
下半部分：**聊天区域**
顶部 AppBar 固定信息：

* 车次主题名 + 当前站点/总站点
* **剩余时间计时器**（动态变色：>50% 正常 / 20%-50% 黄色 / <20% 红色）
* “消息仅在本地保存”icon + tooltip

**Tab 切换**：

* **邻座**（1v1）
* **车厢**（群聊）
  群聊消息顶部标注“广播频道：所有乘客可见”

**输入框**：

* 简洁：文字、表情（限制 sticker/GIF 以节省带宽）
* “发送后不可撤回 / 不可编辑”提示（呼应即焚）
* 文本域随字数增长自动扩展至 3 行（之后滚动）

**系统消息（气泡样式）**：

* “到达下一站：XXX（子主题）”
* “还有 5 分钟到站，请准备结束这趟旅程”
* “车厢广播：……（可能由列车主持人/自动引导文案推送）”

---

### 3.6 **旅程结束页** — *P0*

**视觉**：票夹式纪念封面（与主题色一致），可一键保存至“票夹”。
**模块**：

* 你在本次旅程的关键词（若有）
* 是否愿意在本地“保留聊天记录”按钮（默认保留，用户可一键清空）
* 反馈（1\~3 个单选 + 文本）：是否觉得话题有趣、匹配体验如何、是否愿意再次乘坐同主题列车
* CTA：回到“时刻表”/ 一键报名同主题后续车次（如有）

---

### 3.7 **票夹（Tickets）** — *P0*

* **剩余车票**（大数字 + 下次补给倒计时）
* **纪念票集合**（卡片网格，可点击查看详情）
* **邀请奖励**进度条（已邀请 X 人 / 下一档奖励需要 Y 人）

---

### 3.8 **我（Profile）** — *P1*

* 昵称、头像（更换）、账户类型（匿名/Google）
* 邀请链接（复制按钮 + 分享）
* 开关类设置：

  * 动态车窗动效（省电模式）
  * 清除本地消息缓存
  * 深色 / 浅色 / 跟随系统
* 法务与隐私：

  * “服务器不保存你的聊天记录”强调文本
  * GDPR & Cookie 政策入口

---

## 4. 设计系统（Design System）

### 4.1 Design Tokens（建议用 CSS 变量托管）

```css
:root {
  /* Color */
  --brand: #4C6FFF;
  --brand-foreground: #FFFFFF;
  --bg: #0F1115;
  --bg-elevated: #15181E;
  --fg-primary: #EDEFF3;
  --fg-secondary: #A6ABB6;
  --accent-success: #2ECC71;
  --accent-warning: #F4C150;
  --accent-danger: #FF5C5C;

  /* Train Theme Mapping（每个主题列车会注入一组子色板） */
  --theme-midnight-movie: #1F1B24;
  --theme-folk-music: #123B3F;
  --theme-mountain-hike: #2E3A26;

  /* Typography */
  --font-sans: "Inter var", system-ui, -apple-system, BlinkMacSystemFont;
  --font-mono: "JetBrains Mono", monospace;
  --fs-xxl: 32px;
  --fs-xl: 24px;
  --fs-lg: 18px;
  --fs-md: 16px;
  --fs-sm: 14px;
  --fs-xs: 12px;

  /* Spacing */
  --space-xxl: 32px;
  --space-xl: 24px;
  --space-lg: 20px;
  --space-md: 16px;
  --space-sm: 12px;
  --space-xs: 8px;

  /* Radius & Shadow */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --shadow-sm: 0 2px 6px rgba(0,0,0,0.08);
  --shadow-lg: 0 12px 40px rgba(0,0,0,0.18);

  /* Motion */
  --ease-soft: cubic-bezier(0.4, 0, 0.2, 1);
  --duration-fast: 120ms;
  --duration-normal: 240ms;
  --duration-slow: 480ms;
}
```

### 4.2 字体 & 文字层级

* **标题**（时刻表大屏、倒计时）：Inter Black / 32\~40px
* **正文字**：16px（阅读舒适）
* **辅助信息**：14px（站点副标题、系统消息）
* **倒计时数字**：Monospace + Letter-spacing 增加“时刻表”仪式感

### 4.3 颜色策略

* 全局深色为主，浅色可切换。
* 每辆列车注入**主题色**（用于顶栏渐变、票面、按钮强调）。
* 倒计时使用**渐变色温度**（绿→黄→红）强化“时间在流逝”。

### 4.4 动效

* **Ken Burns**：背景风景慢速缩放平移（5\~8 秒一循环）
* **时间相关内容**（倒计时、进度环）以**平滑过渡**更新，避免频繁跳动
* **切屏交互**：底部 Tab 切换采用滑入滑出（200ms），不抢戏

---

## 5. 组件库（Svelte 方向，示例命名）

* `<TimetableCard />`：车次卡片
* `<StationStepper />`：站点时间线/进度条
* `<CountdownBadge />`：倒计时 Pill
* `<TicketCounter />`：剩余车票组件
* `<JourneyTopBar />`：旅程顶部栏（站点/计时/隐私提示）
* `<ChatWindow />`：通用聊天窗口（传入模式：private/group）
* `<SystemMessage />`：系统事件/提示
* `<SceneryWindow />`：车窗风景
* `<InvitationPanel />`：邀请奖励进度
* `<LocalOnlyNotice />`：“仅本地保存”提示小组件（带 tooltip）
* `<ThemeGradient />`：根据列车主题生成渐变背景

> **注意**：聊天消息组件要本地化存储（IndexedDB / localForage），并且设计 **“清空记录”** 的逻辑入口。

---

## 6. 关键交互与细节处理

### 6.1 倒计时与状态显化

* 候车室：**大倒计时**（分钟为单位，最后 60 秒切到秒）
* 聊天页顶部：剩余时间（mm\:ss），颜色随阈值变化
* 旅程结束：自动淡出聊天内容界面，淡入“旅程结束页”

### 6.2 “无状态/不存消息”的教育式告知

* Onboarding 第 1 屏明确写明 & 用图形解释“消息流经 FCM，不落服务器 DB”
* 聊天输入框上方有一个\*\*“本地保存”\*\*的开关或说明入口
* 个人设置提供显著的“清除本地所有历史消息”按钮

### 6.3 弱网/离线策略（前端层）

* **离线时刻表缓存**（最近一次）
* 提供“离线模式”提示（部分功能不可用，比如实时发车、群聊广播）
* 聊天发送失败的消息气泡以“淡红 + 重试 icon”标注

### 6.4 站点过站动画

* 每个站点到达时，顶部出现**横幅小条**滑入：“到达【xxx】— 推荐问题：……”
* 站点进度条从左到右渐进，强化“行进中”的仪式感

### 6.5 群聊 vs 私聊的感知差

* **颜色**：群聊输入框顶部有“广播 ⚡︎ 车厢内所有人可见”提示条
* **昵称表现**：群聊里每个人固定匿名代号（乘客 23A），私聊页面只显示你与对方

---

## 7. 文案策略（Microcopy）

* **时刻表空**：“列车调度中，下一班很快到站。”
* **购票前**：“你将花费 3 张普通车票，开启 2 站的夜行旅程。”
* **倒计时警示**：“本段旅程将在 02:15 后抵达终点，聊到哪儿算哪儿。”
* **结束页**：“感谢同行。列车已终到，消息仍保留在你的设备里（清除）。”

> 用词风格：温柔、轻松、不过度拟人化，强调“过程/陪伴”而非“结果/关系绑定”。

---

## 8. 无障碍（A11y）与国际化（i18n）

* 所有关键按钮具备 ARIA Label（尤其倒计时、结束按钮）
* 颜色对比度 ≥ WCAG AA
* 时区显示明确（所有日期默认加上“你所在时区”提示）
* i18n 支持：中文/英文（所有固定文案抽离为字典）

---

## 9. 性能与实现建议（贴合“零成本/无状态”）

* **图片懒加载 + 低清晰占位（LQIP）**
* 列车主题色从图片主色提取（可选，前端 Color Thief / Offscreen Worker）
* 聊天消息存储在 IndexedDB，提供**局部加载**（分页/基于时间段，而非全量回灌）
* 所有“状态展示”以**前端可推断**为主（减少 Firestore 读写），例如：倒计时由前端计时器驱动

---

## 10. MVP → MLP（Minimum Lovable Product）演进

**MVP（你文档中已列）**

* P0 + P1 功能完整
* 基础时刻表、购票、1v1 + 群聊、车窗风景静态图

**MLP 增量建议**

* 可选“车长/主持人”角色，负责引导话题（自动 or 人工）
* 旅程主题“皮肤包”（背景、票面、字体变体）
* “站内任务卡片”（游戏化，但不积分，避免 KPI 化社交）
* “今日旅伴关键词云”（匿名聚合，只做群体层面反馈）

---

## 11. 指标与埋点（UX 定量验证）

* **From 时刻表到购票转化率**
* **候车 → 发车留存率**
* **旅程完成率（未中途退出）**
* **1v1 与群聊各自的发送消息中位数**
* **反馈问卷完成率**
* **本地清除聊天记录按钮的使用率**（验证用户对隐私的关注）

---

## 12. 交付与协作（Design → Dev）

**Figma 文件结构建议**

```
/ Foundations
  / Colors
  / Type Scale
  / Grids & Layout
  / Shadows & Radius
/ Components
  / Buttons
  / Tabs
  / Cards
  / Chat Bubbles
  / System Messages
  / Countdown
/ Patterns
  / Timetable
  / Ticket Purchase
  / Journey Chat
  / End Page
/ Prototypes
  / Mobile (MVP)
  / Desktop (MVP)
```

---

### 结语

这款产品的**最大差异化**在于：**“把对话当成一段会结束的旅程”**。UI 的所有元素都要围绕“时间、站点、风景、一次性体验”展开，并且\*\*在每一步明确传达“消息只存在你的设备里”\*\*的承诺。
如果你需要，我可以继续为你：

* 画出完整的**低/中保真线框图（以关键屏为序）**
* 输出**Tailwind 设计Token / 组件类名规范**
* 写出**关键 Svelte 组件骨架**与状态机（XState）描述

告诉我你想先从哪部分做起？我可以一步步把它拆成可实施的设计/开发任务清单。
